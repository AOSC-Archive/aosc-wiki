---
title: AOSC OS/Retro：面向用户与维护者的介绍（征求意见稿）
description: 在古董设备上使用 AOSC OS
published: true
date: 2020-08-10T14:16:01.148Z
tags: sys-retro
editor: markdown
---

这个页面的主要用途是介绍 AOSC/Retro 的设计规范和维护目标。想要了解这个分支的基本理念，请阅读 [这个页面](/en/sys-retro-rationale)。

# 设计规范

无论是从用户体验的角度，还是从维护的角度出发，AOSC OS/Retro 都是标准的 AOSC OS 发行版。但是依赖关系、特性和维护计划会和主线版本有所不同。简而言之，AOSC OS/Retro 将：


- 只为有限的古董架构提供支持。
- 和主线版本共享同一 [软件包树](https://github.com/AOSC-Dev/AOSC-os-abbs/) 和 [核心](https://github.com/AOSC-Dev/AOSC-os-abbs/blob/stable/README.CORE.md)。
- 和主线版本共享同一维护工具集。
- 为了节省存储空间和内存，对软件包特性进行精简。
- 和主线版本相比，提供不同的变种版本。
- 在多数情况下，更新速度会慢于主线版本。

下面，我们将展开介绍 AOSC/Retro 和主线版本的共同点和不同点。

## 目标架构与设备

AOSC OS/Retro 目前为下面的架构与设备提供支持：

- 32 位的 Intel 80486 和与其兼容的（IBM）Personal Computers（不需要浮点运算单元）以及 Personal System/2（PS/2）。
- 32 位的基于 Big Endian PowerPC 的 Apple Macintosh 电脑（需要有 [New World ROM](https://en.wikipedia.org/wiki/New_World_ROM) 支持）。

## 维护工具集

As AOSC OS/Retro is *not* a fork but a *branch* of the mainline AOSC OS distribution, it will share not only the package tree, but also the Core and the maintenance tools as the mainline...

- Package Tree: [aosc-os-abbs](https://github.com/AOSC-Dev/aosc-os-abbs), on the [`retro`](https://github.com/AOSC-Dev/aosc-os-abbs/tree/retro) branch.
    - This means that AOSC OS/Retro will also use systemd as the default init system. *Now before you start yelling, systemd runs fine on a Toshiba T4900CT with an Intel Pentium 75MHz processor, 16MiB of RAM, and a 810MiB HDD. We've tested it to be sure.*
- AOSC OS Core will be shared, but only updates based on what are synced to the `retro` branch. See [Maintenance Schedule](#maintenance-schedules).
- Packaging/Maintenance Tools...
    - [Autobuild3](https://github.com/AOSC-Dev/autobuild3), for automatic packaging from Autobuild3 manifests.
    - [ACBS](https://github.com/AOSC-Dev/acbs), for tree-based Autobuild3 manifest management and packaging.
    - [Ciel](https://github.com/AOSC-Dev/ciel), for containerised packaging.
    - Various [scriptlets](https://github.com/AOSC-Dev/scriptlets), shared with AOSC OS.

## Dependencies

As AOSC OS/Retro targets storage and performance constraint devices, unlike its mainline counterpart, AOSC OS/Retro will ship packages with minimal optional feature enabled. Listed below are a few general rules to be followed...

- Base distribution (containing `admin-base`, `boot-base`, `core-base`, `editor-base`, `kernel-base`, `network-base`, `systemd-base`, `util-base`, and `web-base`) *must not* introduce dependency to Python (`python-2`, `python-3`) and Perl (`perl`).
- Language bindings (Java, Perl, Python, etc.) *must not* be enabled by default, unless required by another package essential to the distribution.
- Glibc is *only* to ship with the `C` and `C.UTF-8` locales pre-generated, with others generated by user configuration (defined in `/etc/locale.gen` but commented by default).
- Strip down *all optional* dependencies, unless such package is from the [Core](https://github.com/AOSC-Dev/aosc-os-abbs/blob/groups/build-core), or otherwise discussed on a case-by-case basis.
- *All packages* are to be built with Link-Time Optimisation enabled, unless such optimisation leads to build failure (to be reported to upstream).
- Non-performance critical applications are to be built with the `-Os` (`AB_FLAGS_OS=1` in `autobuild/defines`) optimisation level to conserve space.
- Manpages and Texinfo documents will be shipped, but all other forms of documentation (examples, HTML, gtk-doc, etc.) will be *omitted*.
- Linux Kernel must boot *without* Dracut, unless used on a RAID setup. Dracut is *not* shipped with default distributions.

## Distribution Features

AOSC OS/Retro will ship in two flavours, "Base" and "Base/X11." Both flavours will come fully localised (once locale is enabled by the end-user) as well as a generic, non-optimised Linux Kernel for their respective

- The Base flavour contains a minimal bootable and non-graphical system with tools essential to system management, basic text editing (GNU Nano), networking (wired and wireless), and basic user functions (compression, documentation browser, pager, power conservation, system monitoring, etc.).
- The Base/X11 flavour contains a minimal bootable and graphical system, with all components listed above for the Base flavour, added with an X11-based desktop environment and other graphical utilities.
- Network management on both flavours will be provided with NetworkManager.

The Base/X11 variant will come with the following additional components (the list below is subject-to-change)...

- Desktop Environment: IceWM with Panel.
    - IceWM is chosen for its familiar (Windows-like) interface, (partial) FD.o compliance, as well as CJK (Chinese, Japanese, and Korean) support.
- Fonts: Standard X11 fonts (bitmap) and Unifont (bitmap and vectorised).
    - Unifont supplied to provide complete Unicode text displaying support.
- Audio and Video: MPV and Cmus; FFmpeg; PulseAudio.
    - MPV is chosen for its lightweight SDL2-based interface, as well as FFmpeg support.
    - Cmus is chosen for its curses-based terminal UI, minimalising graphical hardware requirement.
    - PulseAudio will come standard for proper multi-device and multi-application audio support.
- Image Viewer: Feh.
    - Feh is chosen for its minimal interface based on standard X widgets.
- Web Browser: Dillo, w3m, and Lynx.
    - Dillo is chosen for its lightweight FLTK interface, as well as partial HTML5 compliance.
    - w3m and Lynx are shipped as standard under the `web-base` metapackage.

Extra packages, such as Firefox and more feature-complete desktop environments will be available from the [community repository](https://packages.aosc.io/), however, hardware requirement checks will be enforced based on processor and memory installed on your AOSC OS/Retro device (i.e., package installation will be aborted when attempting to install Firefox on a computer without SSE2 SIMD support).

## Maintenance Schedules

AOSC OS/Retro will be maintained on the [`retro`](https://github.com/AOSC-Dev/aosc-os-abbs/tree/retro/) branch, sharing the same [package tree](https://github.com/AOSC-Dev/aosc-os-abbs/) with the mainline distribution. However, in interest of both the maintainer's reasonable maintenance effort, as well as the longevity and usability of the target devices, AOSC OS/Retro will update on an *annual schedule*.

After the first update cycle of a year, the `retro` branch will *merge from* the `stable` branch from the mainline distribution (`stable` => `retro`). After which, *no further merge or reverse merge* will be allowed. Package versions in the `retro` branch will remain constant unless...

- An [patch-level update](/dev-sys-known-patch-release-rules) is made available.
- A security update is made available that *requires* a version update. If necessary, changes could be [cherry-picked](https://git-scm.com/docs/git-cherry-pick) from the `stable` branch.

At the end of each annual cycle, a new distribution tarball will be made available on the [downloads page](https://aosc.io/downloads/), as well as an update CD image containing a local repository containing all system updates. A full AOSC OS/Retro repository will also be provided in forms of a tarball or a set of CD/DVD image.

# 维护目标

AOSC OS/Retro will be maintained with a few goals in mind, relating to system performance, storage requirements, and peripheral support. This chapter will also serve to outline AOSC OS/Retro's system requirements.

This chapter will then be split into sections, containing requirements and metrics shared and specific to each of our target architectures.

## Common Metrics

- AOSC OS/Retro's "Base" flavour should install onto a 540MB hard disk drive (largest capacity available for non-LBA systems, such as earlier 486-class systems), while the "Base/X11" flavour should install onto a 1.2GB drive (commonly found on Intel x86 computers from ~1996).
    - After the system is installed, there should be enough space for a 64MiB swap area and future system updates (assuming one package is cached onto the hard disk at a time, using the update CD).
    - Users should expect to conserve ~100MiB of hard disk space for network- or internet-based system updates.
- AOSC OS/Retro should not require any form of network access for normal usage, assuming the user has obtained a copy of local repository.
- AOSC OS/Retro should support common ISA/EISA (or PCMCIA), PCI (or CardBus), PCI Express (or ExpressCard), SCSI, as well as USB (1.1/2.0), PS/2, Serial and Parallel peripherals.
- AOSC OS/Retro should support dial-up, 10/100/1000Mbps Ethernet, as well as 802.11a/b/g/n/ac wireless connections.
- AOSC OS/Retro should boot from IDE/EIDE/CE-ATA/SATA/SCSI-based hard disk drives, SCSI configuration should be supported but will require extra components. AOSC OS/Retro may boot from USB, optical media, or other forms of external/removable storage, but this will not officially supported.

## System Performance (x86)

On the 32-bit x86 architecture, AOSC OS/Retro "Base" requires the following
system components...

- Processor: Intel 80486 or compatible, FPU (Floating Point Unit) not required.
- System Bus: ISA, EISA, PCI, or PCI Express based system devices. MCA (Micro Channel Architecture) not supported.
- RAM: 16MiB (32MiB swap).
- Storage: 540MB (~514MiB).
    - (Ultra) DMA via PCI Bus Mastering will significantly improve system performance.
- Input Device: PS/2 or Serial Port Keyboard. Mouse not required.
- Display: VGA or compatible, or serial terminal.

AOSC OS/Retro "Base/X11" requires the following system components...

- Processor: Intel 80486 or compatible, FPU (Floating Point Unit) not required.
    - Intel Pentium II 233MHz, AMD K6, Cyrix MediaGX, Via C7 or above will significantly improve graphical experience.
    - Intel Pentium III 500MHz, AMD K6-II/III or above recommended for video playback using MPV.
- System Bus: ISA, EISA, PCI, or PCI Express based system devices. MCA (Micro Channel Architecture) not supported.
- RAM: 32MiB (32MiB swap).
    - 128MiB or above recommended for Internet browsing.
- Storage: 1.2GB (~1141MiB).
    - 4.0GB (~3814MiB) recommended for local multimedia storage.
    - (Ultra) DMA via PCI Bus Mastering will significantly improve system performance.
- Input Device: PS/2 or Serial Port Keyboard and Mouse.
    - Touchscreen will be supported via I2C or Serial Port.
- Display: VGA or compatible.
    - ISA/EISA video cards *not recommended*, VESA Local Bus will significantly improve video performance.
    - PCI and PCI Express video cards recommended, especially those with OpenGL 2.1 support (often found after ~2002), as this will allow for GPU-based video playback acceleration.

## System Performance (PowerPC 32-bit, Big Endian)

AOSC OS/Retro "Base" or "Base/X11" should run on all supported devices on this architecture - that is, PowerPC-based Apple Macintosh computers with New World ROM support.

- Portables...
   - PowerBook G3 "Lombard" and "Pismo" models.
   - All iBook G3, iBook G4, PowerBook G4 models.
- Desktops...
   - Power Macintosh G3 "Blue and White" models.
   - All Power Macintosh G4 and G5 models.
   - All iMac G3 and G4 models.
   - All eMac models.
   - All G4-based Mac Mini models.
   - All G4- and G5-based Xserve models.
